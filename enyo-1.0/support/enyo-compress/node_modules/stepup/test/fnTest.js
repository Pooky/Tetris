require('./helper');


var myfn = Step.fn(
  function () {
    console.log('here');
    fs.readFile(arguments[0], 'utf8', this);
  },
  function capitalize(err, text) {
    console.log('there');
    if (err) throw err;
    return text.toUpperCase();
  }
);

var selfText = fs.readFileSync(__filename, 'utf8');

expect('result');
myfn(__filename, function (err, result) {
    console.log('what');
  fulfill('result');
  if (err) throw err;
  assert.equal(selfText.toUpperCase(), result, "It should work");
});
